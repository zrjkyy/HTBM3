<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- <link rel="stylesheet" type="text/css" href="/static/plugins/easyui-1.4.2/themes/default/easyui.css" /> -->
<link rel="stylesheet" type="text/css" href="static/css/easyui.css">
<link rel="stylesheet" type="text/css" href="static/css/icon.css">
<link rel="stylesheet" type="text/css" href="static/css/customerbak.css">
<!-- <link rel="stylesheet" type="text/css" href="/manage/template/js/area/css.css" /> -->

<link rel="stylesheet" type="text/css" href="static/css/photoswipe.css">
<link rel="stylesheet" type="text/css" href="static/css/default-skin.css">
<link rel="stylesheet" type="text/css" href="static/css/bztTheme.css">
<!-- <link rel="stylesheet" type="text/css" href="/static/plugins/easyui-1.4.2/themes/icon.css" /> -->
	
<link rel="stylesheet" type="text/css" href="static/css/font-awesome.min.css">
<!-- <link rel="stylesheet" type="text/css" href="/manage/template/photoSwipe-master/PhotoSwipe-master/dist/photoswipe.css" />
<link rel="stylesheet" type="text/css" href="/manage/template/photoSwipe-master/PhotoSwipe-master/dist/default-skin/default-skin.css" /> -->
<!-- <link rel="stylesheet" type="text/css" href="/manage/template/css/bztTheme.css"/> -->
<script type="text/javascript" src="static/js/domquery.min.js"></script>
<script type="text/javascript" src="static/js/underscore-min.js"></script>
<script type="text/javascript" src="static/js/easyui_inc.js"></script>
<script type="text/javascript" src="static/js/jquery.highlighter.js"></script>
<script type="text/javascript" src="static/js/codeMaster.js"></script>
<script type="text/javascript" src="static/js/jquery.query.js"></script>
<script type="text/javascript" src="static/js/jquery.easyui.min.js"></script>
<script type="text/javascript" src="static/js/moment.min.js"></script>
<script type="text/javascript" src="static/js/common.validatebox.js"></script>
<script type="text/javascript" src="static/js/WdatePicker.js"></script>
<script type="text/javascript" src="static/js/easyui.validatebox.extend.js"></script>
<script type="text/javascript" src="static/js/easyui-lang-zh_CN.js"></script>
<script type="text/javascript" src="static/js/support.js"></script>
<script type="text/javascript" src="static/js/common.datagrid.js"></script>
<script type="text/javascript" src="static/js/layer.js"></script>
<script type="text/javascript" src="static/js/ko.js"></script>
<script type="text/javascript" src="static/js/knockout.validation.min.js"></script>
<script type="text/javascript" src="static/js/knockout.mapping-2.4.1.js"></script>
<script type="text/javascript" src="static/js/jquery.base64.js"></script>
<script type="text/javascript" src="static/js/Math.uuid.js"></script>
<script>document.write('<script type="text/javascript" src="/manage/template/helper/helper.js?_=' + new Date().getTime() + '"><\/script>');</script>
<script type="text/javascript" src="static/js/echarts.min.js"></script>
<script>document.write('<script type="text/javascript" src="/manage/template/comboChange/comboChange.js?_=' + new Date().getTime() + '"><\/script>');</script>
<script>document.write('<script type="text/javascript" src="/manage/template/common/constants.js?_=' + new Date().getTime() + '"><\/script>');</script>
<script>document.write('<script type="text/javascript" src="/manage/template/fmt/fmt.js?_=' + new Date().getTime() + '"><\/script>');</script>
<script>document.write('<script type="text/javascript" src="/manage/template/js/jquery.tinywatermark.js?_=' + new Date().getTime() + '"><\/script>');</script>
<script type="text/javascript" src="static/js/photoswipe.min.js"></script>
<script type="text/javascript" src="static/js/photoswipe-ui-default.min.js"></script>
<script type="text/javascript" src="static/js/easyui.bzt.oriented.js"></script>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="renderer" content="webkit">
<script type="text/javascript">
	var $ajax = $.ajax;
	var basePath = '';
	$.ajax = function(option) {
		var success = option.success;
		if (success && typeof success === 'function') {
			option.success = function(result, status, obj) {
				var booleanSessionOut = obj.getResponseHeader("sesstionOut");
				if (booleanSessionOut && booleanSessionOut == 1) {
					var url = obj.getResponseHeader("url");
					if (url.indexOf("cas") >= 0) {
						url = url + location.origin
								+ "/manage/adminGlobalLogin.html";
					}
					top.location.href = url;
				} else {
					success.apply(this, arguments);
				}
			}
		}
		return $ajax.apply(this, arguments);
	}
</script>
<link rel="stylesheet" type="text/css" href="static/css/login.css">
<link href="https://tc.7zz.cn/i/2023/11/27/6563802c50d87.webp" type="image/x-icon" rel="shortcut icon">
<title>网爵云</title>
<script type="text/javascript">
	$(function() {
        $.messager.defaults = $.extend({}, $.fn.window.defaults, {
            ok : "Ok",
            cancel : "Cancel",
            width : 360,
            height : "auto",
            modal : true,
            collapsible : false,
            minimizable : false,
            maximizable : false,
            resizable : false,
            fn : function() {
            }
        });
        $("#loginAccount").attr("name",new Date().format("yyyy-MM-dd hh:mm:ss"));
        $("#password").attr("name",new Date().format("yyyy-MM-dd hh:mm:ss"));
		var ch = document.documentElement.clientHeight;
		$(".login_header_2").css("padding-top", (ch - 480) / 2 + "px");
		$('input:first').focus();
		var $inp = $('input:first');
		$inp.bind('keydown', function(e) {
			if (event.keyCode === 13) {
				e.preventDefault();
				$('input:eq(1)').focus();
			}
		})
		var $inp2 = $('input:eq(1)');
		$inp2.bind('keydown', function(e) {
			if (event.keyCode === 13) {
				e.preventDefault();
				//btnLogin();
				$('input:eq(2)').focus();
			}
		})
		var $inp3 = $('input:eq(2)');
		$inp3.bind('keydown', function(e) {
			if (event.keyCode === 13) {
				e.preventDefault();
				btnLogin();
			}
		})
		/* var btn = $("button");
		btn.bind('keydown', function(e) {
			if (event.keyCode === 13) {
				e.preventDefault();
				btnLogin();
			}
		}) */
	})

  // 回车触发登录
  function keyLogin(){
    if (event.keyCode == 13)   //回车键的键值为13
      if ($('.panel.window.messager-window').length > 0) {
        //btnLogin(); //调用登录按钮的登录事件
      }
  }

  function btnLogin() {
		var loginAccount = $("#loginAccount").val();
		var password = $("#password").val();
		var verifiCode = $("#verifiCode").val();
		//验证登录账号
		if (loginAccount == "") {
			$.messager.alert("提示", "账号不能为空！", "info", function() {
				$('#loginAccount').focus();
			});
			return false;
		}
		//验证登录密码
		if (password == "") {
			$.messager.alert("提示", "密码不能为空", "info", function() {
				$('#password').focus();
			});
			return false;
		}
		//验证验证码
        if (verifiCode == "") {
            $.messager.alert("提示", "验证码不能为空", "info", function() {
                $('#verifiCode').focus();
            });
            return false;
        }
    
        //对 password 进行加密
        password = $.base64.encode(password);

		//验证
		var opts = {
			url : "/manage/login/check.html",
			type : "POST",
			data : {
				loginAccount : loginAccount.trim(),
				password : password,
				verifiCode:verifiCode,
			},
			success : function(result) {
				if (result.success != true) {
					$.messager.alert("信息", result.msg, "info",function() {
						if(result.msg.indexOf("验证") != -1){
							//$('#verifiCode').val('');
							$('#verifiCode').focus();
						}else {
							//$('#password').val('');
							//$('#loginAccount').val('');
							$('#loginAccount').focus();
						}
					});
				} else {
					if (result.data.flagSuperAdmin == "1") {//超级管理员登录
						window.location.href = "/manage/index.html";
					}
					// else if(result.data.roleList&&result.data.roleList.length>1){//普通用户登录(该登录用户有多个角色的情况)
					// 	  $("#userName").html(result.data.userInfo.loginAccount);
					// }
					  /* window.location.href = "/manage/index.html"; */
					else if(result.data.roleList&&result.data.roleList.length==1){//普通用户登录(该登录用户只有一个角色的情况)
					      window.location.href = "/manage/index.html";
					}else{
						
						  $.messager.alert("提示", result.msg, "info");
						  return;
					} 
					
				}
			}
		}
		//刷新验证码
	    refreshVerifiCode();
		$.ajax(opts);
	}
	
	//刷新验证码
	function refreshVerifiCode(){
	      var t = new Date().getTime();
	      document.getElementById("verifiCodeImg").src= "/public/captcha/getCaptcha?t=" + t;
	}
</script>
</head>
<body onkeydown="keyLogin();">
	<div class="login-box">
		<div class="login-content">
			<div class="login_body_2">
				<div class="login_area">
					<img src="static/picture/login.png" class="login_img" width="434">
					<div class="login_box">
						<div class="title" style="padding-top:80px;">
							<img src="https://tc.7zz.cn/i/2023/12/03/656c6c915ca3c.webp">
						</div>
						<p>
							<span class="loginIcon"></span>
							<input id="loginAccount" name="" autocomplete="off" type="text" class="user" placeholder="账号">
						</p>
						<p>
							<span class="passwordIcon"></span>
							<input id="password" name="" autocomplete="off" onfocus="this.type='password'" class="password" placeholder="请输入密码">
						</p>
						<p style="display: flex;align-items: center;">
				          <span class="verifiCodeIcon"></span>
				
				        </p>
						<button onclick="btnLogin()">登录</button>
					</div>
				</div>
			</div>
			<div class="login_footer">
				版本所有：网爵科技<a class="support" href="https://beian.miit.gov.cn/" target="_blank">ICP号：豫ICP备2021018473号-7</a>
			</div>
		</div>
	</div>
	<!-- <div>
		<a target="_blank" href="http://wpa.qq.com/msgrd?v=3&amp;uin=2852785379&amp;site=qq&amp;menu=yes">
		<img src="https://p.qpic.cn/qidian_pic/2852159005/201806067a84a4e3f5ba6ff26eaf4e09d510610a/0"
			 class="qidian_wpa_img" style="position: fixed; cursor: pointer; z-index: 1999999999; right: 0px; bottom: 0px; width: 146px; height: 62px;" />
		</a>
	</div> -->
</body>
</html>
